(function(){var e={3727:function(e,t,n){"use strict";var o=n(9963),a=n(6252),s=n(3577),l=n(2262),i=n(1059),r=n(2482),d=n(5934);function c(){return(0,d.Z)()}const u={appearance:{x:0,y:0,width:100,height:100},gd:{type:"notice",content:null,variable:null}};class g{constructor(e){"undefined"==typeof e.id&&(e.id=c()),Object.assign(this,u,e)}is_node(){return!0}is_edge(){return!1}get_label(){return this.gd.variable??this.gd.content??`${this.gd.type}_${this.id.toString().substring(0,8)}`}get_variable(){return this.gd.variable??`${this.gd.type}_${this.id.toString().substring(0,8)}`}get_edges_in(){return this.graph.edges.filter((e=>e.node_to_id==this.id))}get_edges_out(){return this.graph.edges.filter((e=>e.node_from_id==this.id))}get_nodes_in(){const e=this.get_edges_in().map((e=>e.node_from_id))??[];return this.graph.nodes.filter((t=>e.includes(t.id)))}get_nodes_out(){const e=this.get_edges_out().map((e=>e.node_to_id))??[];return this.graph.nodes.filter((t=>e.includes(t.id)))}}const h={gd:{content:null}};class p{constructor(e){e.id=e.id??c(),Object.assign(this,h,e)}is_node(){return!1}is_edge(){return!0}get_node_from(){return this.graph.nodes.filter((e=>e.id==this.node_from_id))[0]}get_node_to(){return this.graph.nodes.filter((e=>e.id==this.node_to_id))[0]}}class b{constructor(e="Untitled graph"){(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"nodes",[]),(0,r.Z)(this,"edges",[]),this.name=e}get_nodes_by_type(e){return this.nodes.filter((t=>t.gd.type==e))??[]}add_node(e){this.nodes.push(new g({...e,graph:this}))}add_edge(e){this.edges.push(new p({...e,graph:this}))}clear(){this.nodes=[],this.edges=[]}}var m=b;const _=(e="")=>null==e?null:{attrs:{text:{text:e}},position:{distance:.4}},f={attrs:{line:{strokeWidth:"1"}},zIndex:-1},v={grid:!0,background:{color:"white"},mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},scroller:{enabled:!0,pannable:!0},connecting:{allowBlank:!1,allowMulti:!1,allowLoop:!1,allowEdge:!1,allowNode:!1,allowPort:!0,highlight:!0,snap:!0,connector:"algo-connector",connectionPoint:"boundary",anchor:"top",validateMagnet({e:e,magnet:t,view:n,cell:o}){return"in"!==t.getAttribute("port-group")},createEdge(){return this.createEdge(f)},validateEdge({edge:e,type:t,previous:n}){return!0},validateConnection({edge:e,sourceMagnet:t,targetMagnet:n}){return null!=t&&null!=n&&("out"==t.getAttribute("port-group")&&"in"==n.getAttribute("port-group"))}},history:{enabled:!0,beforeAddCommand(e,t){if("tools"==t.key)return!1}},resizing:{enabled:!1},selecting:{enabled:!0,multiple:!1}};function y(e){e.on("node:mouseenter",(({cell:e})=>{e.addTools([{name:"button-remove"}])})),e.on("node:mouseleave",(({cell:e})=>{setTimeout((()=>{e.removeTool("button-remove")}),1e3)})),i.kJ.registerConnector("algo-connector",((e,t)=>{const n=4,o=Math.abs(t.y-e.y),a=Math.floor(o/3*2),s={x:e.x,y:e.y+n+a},l={x:t.x,y:t.y-n-a};return i.y$.normalize(`M ${e.x} ${e.y}\n            L ${e.x} ${e.y+n}\n            C ${s.x} ${s.y} ${l.x} ${l.y} ${t.x} ${t.y-n}\n            L ${t.x} ${t.y}\n            `)}),!0)}const w={in:{attrs:{circle:{r:6,stroke:"#6a6a6b",magnet:!0}},position:"top"},out:{attrs:{circle:{r:6,stroke:"#6a6a6b",magnet:!0}},position:"bottom"}};function x(e){const t={groups:w,items:[]};for(const n of e)t.items.push({id:`${n}-1`,group:n});return t}const k="notice",C={render(e){const t=e.getData();let n="",o="";return t.gd.variable?(n=t.gd.variable,o="node-label-variable"):t.gd.content?(n=`"${t.gd.content}"`,o="node-label-content"):t.is_stencil_node?(n=`new ${t.gd.type} node`,o="node-label-unnamed"):(n=`${t.gd.type}_${e.id.toString().substring(0,8)}`,o="node-label-unnamed"),`<div class="node node-${t.gd.type} ${t.errors?"node-has-errors":""}">\n                <span class="${o}">${n}</span>\n            </div>`},shouldComponentUpdate(e){return e.hasChanged("data")}},D={start:{antv_metadata:{shape:"html",html:C,width:180,height:36,data:{gd:Object.assign({},u.gd,{type:"start"})},ports:x(["out"])},config_fields:{general:["variable","label"],additional:[]}},decision:{antv_metadata:{shape:"html",html:C,width:180,height:36,data:{gd:Object.assign({},u.gd,{type:"decision"})},ports:x(["in","out"])},config_fields:{general:["variable","label"],additional:[]}},notice:{antv_metadata:{shape:"html",html:C,width:180,height:36,data:{gd:Object.assign({},u.gd,{type:"notice"})},ports:x(["in","out"])},config_fields:{general:["variable","label"],additional:[]}},end:{antv_metadata:{shape:"html",html:C,width:180,height:36,data:{gd:Object.assign({},u.gd,{type:"end"})},ports:x(["in"])},config_fields:{general:["variable","label"]}}};class j{constructor(e,t){(0,r.Z)(this,"data",void 0),(0,r.Z)(this,"events",void 0),(0,r.Z)(this,"is_open",(0,l.iH)(!1)),this.data=e?(0,l.qj)(e):(0,l.qj)({}),this.events={...t}}open(){this.is_open.value=!0,this.events.onOpen&&this.events.onOpen()}close(){this.is_open.value=!1,this.events.onClose&&this.events.onClose()}}const S=e=>((0,a.dD)("data-v-608b8ee0"),e=e(),(0,a.Cn)(),e),O=S((()=>(0,a._)("div",{class:"modal-bg fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1))),$={class:"fixed z-20 inset-0 overflow-y-auto"},U={class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center"};var H=(0,a.aZ)({props:{modal:null,container_style:null},setup(e){const t=e;let n=!1;const l=e=>{const t=e.target,o=document.querySelector(".modal-container");n=null!=o&&!o.contains(t)},i=e=>{if(n){const n=e.target,o=document.querySelector(".modal-container");null==o||o.contains(n)||t.modal.close()}};return(e,n)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(o.uT,{name:"modal-transition",appear:""},{default:(0,a.w5)((()=>[t.modal.is_open.value?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeydown:n[0]||(n[0]=(0,o.D2)((e=>t.modal.close()),["esc"])),tabindex:"0",onMousedown:l,onMouseup:i},[O,(0,a._)("div",$,[(0,a._)("div",U,[(0,a._)("div",{class:"modal-container relative bg-white rounded-lg text-left overflow-hidden shadow-xl sm:my-8 sm:max-w-md sm:w-full",style:(0,s.j5)(t.container_style??{})},[(0,a.WI)(e.$slots,"default")],4)])])],32)):(0,a.kq)("",!0)])),_:3})]))}}),E=n(3744);const A=(0,E.Z)(H,[["__scopeId","data-v-608b8ee0"]]);var T=A,I=n(4442),M=n.n(I),P=(0,a.aZ)({props:{options:null,value:null},emits:["change","input"],setup(e,{emit:t}){const n=e,o=(0,l.iH)(null),s=(0,l.iH)(null);return(0,a.bv)((()=>{if(null!=s.value){const e={element:s.value,initialValue:n.value,spellChecker:!1,...n.options};o.value=new(M())(e),o.value.codemirror.on("change",((...e)=>{t("change",o.value,...e),t("input",o.value?.value())}))}})),(0,a.Ah)((()=>{null!==o.value&&o.value.cleanup()})),(e,t)=>((0,a.wg)(),(0,a.iD)("textarea",{ref_key:"editorRef",ref:s},null,512))}});const N=P;var L=N,q=L;const Y=e=>((0,a.dD)("data-v-2cb326fd"),e=e(),(0,a.Cn)(),e),Z={key:0},z=Y((()=>(0,a._)("span",{class:"block p-2 text-gray-700"},"Select a node or edge to configure",-1))),R=[z],B={key:1,class:"w-full p-3"},V={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},F={class:"mt-3 text-center sm:mt-0 sm:text-left"},G=Y((()=>(0,a._)("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"Edit content",-1))),J={class:"mt-2"},W={class:"text-sm text-gray-500"},K=(0,a.Uk)(" You can use "),X=Y((()=>(0,a._)("a",{href:"https://commonmark.org/help/",target:"_blank"},"markdown",-1))),Q=(0,a.Uk)(" to add styles to the content displayed for this node. Text containing HTML code will be rendered as HTML. "),ee=Y((()=>(0,a._)("p",{class:"text-sm text-gray-500 mt-1"},[(0,a.Uk)(" Docassmble uses Mako as a templating system, to allow for including variables and code in content. More on how to use this at "),(0,a._)("a",{href:"https://docassemble.org/docs/markup.html#mako",target:"_blank"},"Docassemble"),(0,a.Uk)(". ")],-1))),te=Y((()=>(0,a._)("p",{class:"text-sm text-gray-500 mt-1"},[(0,a.Uk)(" Note that when referencing a variable, even in an 'if' statement, the block corresponding to the variable will be first shown to the user (regardless of the order specified in the graph). To show a variable only when it is defined, one can use the "),(0,a._)("span",{class:"code text-gray-700"},"defined('variable')"),(0,a.Uk)(" function within Mako, as described at "),(0,a._)("a",{href:"https://docassemble.org/docs/markup.html#mako",target:"_blank"},"Docassemble"),(0,a.Uk)(". ")],-1))),ne={class:"mt-4"},oe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ae={class:""},se={class:"mb-2 text-ellipsis overflow-hidden font-mono block text-xl border-b border-gray-300"},le={class:"w-full"},ie=Y((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1))),re=[ie],de={class:"my-2"},ce={class:"mt-1 mb-3 block border-b border-gray-300 text-lg leading-6 font-medium text-gray-800"},ue={key:0},ge=Y((()=>(0,a._)("span",{class:"text-gray-700 block mb-1 text-sm"},"Variable",-1))),he=["placeholder"],pe={key:1},be={class:"flex justify-between items-center mb-1"},me=Y((()=>(0,a._)("label",{class:"text-gray-700 block text-sm",for:"textarea_content"},"Content",-1))),_e=Y((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1))),fe=[_e],ve={key:2,class:"w-full p-2"},ye={class:""},we=Y((()=>(0,a._)("span",{class:"mb-2 font-bold block text-2xl border-b border-gray-300"},"Edge",-1))),xe=Y((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1))),ke=[xe],Ce={key:0,class:"my-2"},De=Y((()=>(0,a._)("span",{class:"my-2 block border-b border-gray-300 uppercase font-bold text-sm text-gray-800"},"General",-1))),je={class:"block mt-2"},Se=Y((()=>(0,a._)("span",{class:"text-gray-700 block mb-1"},"Label",-1))),Oe={class:"w-full my-2 text-right"},$e={key:3},Ue=Y((()=>(0,a._)("span",null,"Invalid cell selected",-1))),He=[Ue];var Ee=(0,a.aZ)({props:{cell:null},setup(e){const t=e,n=new j({read_more:!1,editor:""},{onOpen:()=>{n.data.editor=c.value}}),i=e=>{c.value=e.data.editor,e.close()},r=(0,a.Fl)((()=>{const e=t.cell?.getData()?.node_type??k;let n=null;return n=Object.keys(D).includes(e)?D[e].config_fields:D[k].config_fields,Object.fromEntries(Object.entries(n).filter((([e,t])=>t.length>0)))})),d=(0,l.iH)(""),c=(0,a.Fl)({get(){return d.value,t.cell.getData().gd.content??""},set(e){d.value=e,t.cell.setData({gd:{content:e}})}}),u=(0,l.iH)(""),g=(0,a.Fl)({get(){return u.value,t.cell.getData().gd.variable??""},set(e){u.value=e,t.cell.setData({gd:{variable:""!=e?e:null}})}}),h=(0,l.iH)(""),p=(0,a.Fl)({get(){const e=t.cell;return h.value,e.getLabelAt(0)?.attrs?.text?.text?.toString()??""},set(e){const n=t.cell,o=_(e);null!=o&&(n.removeLabelAt(0),n.setLabelAt(0,o)),h.value=e,n.setData({value:e})}});return(t,d)=>null==e.cell?((0,a.wg)(),(0,a.iD)("div",Z,R)):e.cell.isNode()?((0,a.wg)(),(0,a.iD)("div",B,[(0,l.SU)(n).is_open?((0,a.wg)(),(0,a.j4)(T,{key:0,modal:(0,l.SU)(n),container_style:{"max-width":"48rem"}},{default:(0,a.w5)((()=>[(0,a._)("div",V,[(0,a._)("div",F,[G,(0,a._)("div",J,[(0,a._)("p",W,[K,X,Q,(0,a._)("span",{class:"ml-1 text-sm text-gray-800 cursor-pointer select-none hover:text-gray-700 hover:underline",onClick:d[0]||(d[0]=e=>(0,l.SU)(n).data.read_more=!(0,l.SU)(n).data.read_more)},(0,s.zw)((0,l.SU)(n).data.read_more?"less":"more"),1)]),(0,l.SU)(n).data.read_more?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[ee,te],64)):(0,a.kq)("",!0)]),(0,a._)("div",ne,[(0,a.Wm)((0,l.SU)(q),{options:{},value:(0,l.SU)(n).data.editor,onInput:d[1]||(d[1]=e=>(0,l.SU)(n).data.editor=e)},null,8,["value"])])])]),(0,a._)("div",oe,[(0,a._)("button",{onClick:d[2]||(d[2]=e=>i((0,l.SU)(n))),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},"Accept"),(0,a._)("button",{onClick:d[3]||(d[3]=e=>(0,l.SU)(n).close()),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")])])),_:1},8,["modal"])):(0,a.kq)("",!0),(0,a._)("div",ae,[(0,a._)("span",se,(0,s.zw)(e.cell.getData().gd.variable??`${e.cell.getData().gd.type}_${e.cell.id.toString().substring(0,8)}`),1),(0,a._)("div",le,[(0,a._)("button",{onClick:d[4]||(d[4]=t=>e.cell?.remove()),class:"btn btn-red"},re)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(r),((t,i)=>((0,a.wg)(),(0,a.iD)("div",{key:i},[(0,a._)("div",de,[(0,a._)("span",ce,(0,s.zw)(i.toString()[0].toUpperCase().concat(i.toString().substring(1))),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"block mt-2 mb-1"},["variable"==t?((0,a.wg)(),(0,a.iD)("label",ue,[ge,(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{class:"style-soft w-full font-mono",type:"text","onUpdate:modelValue":d[5]||(d[5]=e=>(0,l.dq)(g)?g.value=e:null),placeholder:`${e.cell.getData().gd.type}_${e.cell.id.toString().substring(0,8)}`},null,8,he),[[o.nr,(0,l.SU)(g)]])])])):(0,a.kq)("",!0),"label"==t?((0,a.wg)(),(0,a.iD)("div",pe,[(0,a._)("div",be,[me,(0,a._)("button",{class:"btn text-sm",onClick:d[6]||(d[6]=e=>(0,l.SU)(n).open())},fe)]),(0,a._)("div",null,[(0,a.wy)((0,a._)("textarea",{id:"textarea_content",style:{"min-height":"4rem"},class:"w-full style-soft",type:"text","onUpdate:modelValue":d[7]||(d[7]=e=>(0,l.dq)(c)?c.value=e:null)},null,512),[[o.nr,(0,l.SU)(c)]])])])):(0,a.kq)("",!0)])))),128))])])))),128))])])):e.cell.isEdge()?((0,a.wg)(),(0,a.iD)("div",ve,[(0,a._)("div",ye,[we,(0,a._)("div",null,[(0,a._)("button",{onClick:d[8]||(d[8]=t=>e.cell?.remove()),class:"btn btn-red"},ke)]),"decision"==e.cell.getSourceCell()?.getData().gd.type?((0,a.wg)(),(0,a.iD)("div",Ce,[De,(0,a._)("div",je,[(0,a._)("label",null,[Se,(0,a.wy)((0,a._)("input",{type:"text",class:"style-soft w-full","onUpdate:modelValue":d[9]||(d[9]=e=>(0,l.dq)(p)?p.value=e:null)},null,512),[[o.nr,(0,l.SU)(p)]])]),(0,a._)("div",Oe,[(0,a._)("button",{class:"inline btn mr-2",onClick:d[10]||(d[10]=e=>p.value="Yes")},"Yes"),(0,a._)("button",{class:"inline btn",onClick:d[11]||(d[11]=e=>p.value="No")},"No")])])])):(0,a.kq)("",!0)])])):((0,a.wg)(),(0,a.iD)("div",$e,He))}});const Ae=(0,E.Z)(Ee,[["__scopeId","data-v-2cb326fd"]]);var Te=Ae;const Ie={class:"shape-holder"},Me=["data-type"];var Pe=(0,a.aZ)({props:{graph:null},setup(e){const t=e,n=(0,l.iH)();(0,a.bv)((()=>{})),(0,a.YP)((()=>t.graph),(e=>{"undefined"!==typeof e&&o(e)}));const o=e=>{n.value=new i.e9.q6({target:e,scaled:!1,animation:!0,validateNode(e){return e.updateData({is_stencil_node:void 0}),!0}})},r=e=>{if("undefined"==typeof t.graph)return!1;const o=e.currentTarget,a=o.getAttribute("data-type");if(!(a in D))return!1;const s=t.graph.createNode(D[a].antv_metadata);s.setData({label:a,is_stencil_node:!0}),n.value?.start(s,e)};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",Ie,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(D),((e,n)=>((0,a.wg)(),(0,a.iD)("div",{key:n,class:(0,s.C_)(`node node-${n}`),"data-type":n,onMousedown:t[0]||(t[0]=e=>r(e))},(0,s.zw)(n),43,Me)))),128))]))}});const Ne=Pe;var Le=Ne;n(1703);function qe(e,t=1,n=2){return e.map((e=>" ".repeat(2*t).concat(e)))}class Ye{validate_graph(e){const t=[],n=e.get_nodes_by_type("start");1!==n.length&&t.push([`graph must have exactly one start node (has ${n.length})`]);const o=e.get_nodes_by_type("end");0===o.length&&t.push(["graph must have atleast one end node"]);const a={};for(const l of e.nodes){const e=this.da_node_get_variable(l);e in a?(a[e].amount+=1,a[e].nodes.push(l)):a[e]={amount:1,nodes:[l]},"start"==l.gd.type&&1!==l.get_edges_out().length?t.push(["start node ",l,` must have 1 outgoing edge (has ${l.get_edges_out().length})`]):"decision"==l.gd.type&&0===l.get_edges_in().length?t.push(["decision node ",l," must have atleast one ingoing edge"]):"decision"==l.gd.type&&0===l.get_edges_out().length?t.push(["decision node ",l," must have atleast one outgoing edge"]):"notice"==l.gd.type&&0===l.get_edges_in().length?t.push(["notice node ",l," must have atleast one ingoing edge"]):"notice"==l.gd.type&&1!==l.get_edges_out().length?t.push(["notice node ",l," must have one outgoing edge"]):"end"==l.gd.type&&0===l.get_edges_in().length&&t.push(["end node ",l," must have atleast one ingoing edge"])}for(const[l,{amount:i,nodes:r}]of Object.entries(a)){const e=[];r.forEach(((t,n)=>{e.push(t),n<r.length-1&&e.push(", ")})),l.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)||t.push([`invalid (python) variable name '${l}' on the node(s): `,...e]),i>1&&t.push([`variable name '${l}' occurs is defined more than once, in the nodes: `,...e])}const s=e.get_nodes_by_type("decision");for(const l of s){let e=!1;const n={},o=l.get_edges_out();for(const t of o)null==t.gd.content&&(e=!0),null!=t.gd.content&&(n[t.gd.content]=n[t.gd.content]+1||1);e&&t.push(["decision node ",l," has atleast one outgoing edge with no content"]),Object.entries(n).forEach((([e,n])=>{if(n>1){const n=o.filter((t=>t.gd.content=e)),a=["the decision node ",l,` has multiple edges with content '${n[0].gd.content}' on the edges: `];n.forEach(((e,t)=>{a.push(e),t<n.length-1&&a.push(", ")})),t.push(a)}}))}if(0===t.length){const n=[],o=e.nodes.filter((e=>0===e.get_edges_in().length));let a=[...e.edges];while(o.length>0){const e=o.pop();n.push(e);for(const t of a.filter((t=>t.node_from_id==e.id))){const e=t.get_node_to();a=a.filter((e=>!(e.id==t.id))),0===a.filter((t=>t.node_to_id==e.id)).length&&o.push(e)}}a.length>0&&t.push(["graph must not contain cycles/loops"])}return t}da_node_get_variable(e){return e.get_variable()}da_node_escaped_markdown(e){if(!e.gd.content)return`'[content of node ${e.id.substring(0,8)}]'`;const t=e.gd.content.split(/\r?\n/),n=[];for(const o of t)n.push(`${o}`);return"|\n".concat(qe(n).join("\n"))}da_build_logic(e,t){const n=t.get_edges_out(),o=[];switch(t.gd.type){case"start":o.push(this.da_node_get_variable(t));for(const t of n)o.push(...this.da_build_logic(e,t.get_node_to()));break;case"end":o.push(`${this.da_node_get_variable(t)}`);break;case"decision":for(const a of n){const n=a.gd.content;if(null==n)continue;const s=this.da_build_logic(e,a.get_node_to());o.push(`if ${this.da_node_get_variable(t)} == '${a.gd.content}':`),o.push(...qe(s||["pass"],1))}break;case"notice":o.push(`${this.da_node_get_variable(t)}`);for(const t of n)o.push(...this.da_build_logic(e,t.get_node_to()));break}return o}out(e){const t=e.get_nodes_by_type("start")[0],n=(e.get_nodes_by_type("end"),[]);for(const s of e.nodes)switch(s.gd.type){case"start":n.push(["question: Start",`subquestion: ${this.da_node_escaped_markdown(s)}`,`continue button field: ${this.da_node_get_variable(s)}`]);break;case"end":n.push([`event: ${this.da_node_get_variable(s)}`,"question: End",`subquestion: ${this.da_node_escaped_markdown(s)}`]);break;case"decision":{const t=e.edges.filter((e=>e.node_from_id==s.id));let o=[];for(const e of t)null!=e.gd.content&&o.push(`  - "${e.gd.content}"`);o.sort(),o.length>0&&(o=["buttons:",...o]),n.push(["question: Question",`subquestion: ${this.da_node_escaped_markdown(s)}`,`field: ${this.da_node_get_variable(s)}`,...o]);break}case"notice":n.push(["question: Notice",`subquestion: ${this.da_node_escaped_markdown(s)}`,`continue button field: ${this.da_node_get_variable(s)}`]);break}const o=[];o.push(...qe(this.da_build_logic(e,t))),o.length>0&&n.push(["mandatory: True","code: |",...o]);let a=n.map((e=>"string"==typeof e?e:Array.isArray(e)?e.join("\n"):void 0)).join("\n---\n");return a}}class Ze{in(e,t){e.clear();const n={nodes:t.getNodes(),edges:t.getEdges()};for(const o of n.nodes){const t=o.getData(),n={id:o.id,gd:t.gd,appearance:{x:o.getPosition().x??0,y:o.getPosition().y??0,width:o.getSize().width??D[t.gd.type].antv_metadata.width,height:o.getSize().height??D[t.gd.type].antv_metadata.height}};e.add_node(n)}for(const o of n["edges"]){if(null==o.getSourceCell()||null==o.getTargetCell())continue;let t=o.getLabelAt(0)?.attrs?.text?.text?.toString()??null;""==t&&(t=null);const n={id:o.id,node_from_id:o.getSourceCellId(),node_to_id:o.getTargetCellId(),gd:{content:t},appearance:{vertices:o.getVertices()}};e.add_edge(n)}return e}out(e){const t=[];let n=0;Object.values(e.nodes).forEach((e=>{let o={...D[e.gd.type].antv_metadata,id:e.id,x:e.appearance?.x??(n+=50),y:e.appearance?.y??50,data:{gd:e.gd}};o=Object.assign({},D[e.gd.type].antv_metadata??D.notice.antv_metadata??{},o),t.push(o)}));const o=[];Object.values(e.edges).forEach((e=>{const t=_(e.gd.content),n={...f,id:e.id,labels:null!=t?[t]:[],source:{cell:e.node_from_id,port:"out-1"},target:{cell:e.node_to_id,port:"in-1"},data:{gd:e.gd}};o.push(n)}));const a={nodes:t,edges:o};return a}}function ze(e,...t){const n={};return t.forEach((t=>{n[t]=e[t]})),n}class Re{in_json(e,t){e.clear(),e.name=t.main.name;for(const n of t.nodes)e.add_node(n);for(const n of t.edges)e.add_edge(n);return e}out_json(e){const t={nodes:e.nodes.map((e=>ze(e,"id","appearance","gd"))),edges:e.edges.map((e=>ze(e,"id","node_from_id","node_to_id","gd"))),main:{name:e.name}};return t}}var Be=class{constructor(e){(0,r.Z)(this,"graph",void 0),(0,r.Z)(this,"json",void 0),(0,r.Z)(this,"antvis",void 0),(0,r.Z)(this,"docassemble",void 0),this.graph=e??new m,this.json=new Re,this.antvis=new Ze,this.docassemble=new Ye}in_json(e){return this.graph=this.json.in_json(this.graph,e),this}out_json(){return this.json.out_json(this.graph)}in_antv(e){return this.graph=this.antvis.in(this.graph,e),this}out_antv(){return this.antvis.out(this.graph)}out_docassemble(){return this.docassemble.out(this.graph)}},Ve=n(3002);const Fe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ge={class:"sm:flex sm:items-start"},Je=(0,a._)("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,a._)("path",{class:"stroke-blue-900","stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),We={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ke=(0,a._)("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"Import",-1),Xe=(0,a._)("p",{class:"mt-2 text-sm text-gray-500"},"Paste the data of the exported interview below.",-1),Qe={class:"block mt-2 text-sm text-gray-500"},et=(0,a.Uk)("or "),tt={class:"text-sm cursor-pointer text-gray-800 bg-gray-100 hover:bg-gray-200 border border-gray-400 py-0.5 px-1 mx-0.5 rounded-md"},nt=(0,a._)("span",null,"upload a file",-1),ot=(0,a.Uk)(" instead."),at={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},st={class:"toolbar"},lt={class:"toolbar-item"},it=["disabled"],rt={class:"toolbar-item"},dt=["disabled"],ct={class:"toolbar-item"},ut=["disabled"],gt={class:"toolbar-item"},ht=["disabled"],pt={class:"toolbar-item"},bt=["disabled"];var mt=(0,a.aZ)({props:{graph:{type:i.kJ},docassemble_cont_update:{type:Function},init_modeler:{type:Function}},setup(e){const t=e,n=(0,Ve.pm)(),s=(0,l.iH)(null),i=new j({text:""},{onOpen:()=>{(0,a.Y3)((()=>{s.value?.focus()}))},onClose:()=>i.data.text=""}),r=e=>{var t=new FileReader;t.onload=e=>{e.target?.result&&"string"===typeof e.target?.result&&(i.data.text=e.target?.result)};const n=e.target;null!=n.files&&t.readAsText(n.files[0])},d=()=>{let e=i.data.text;if(0==e.length)return void n.error("No import data is empty");const o=e.match(/\[START INLINE GRAPHDOC EXPORT\].{0,5}(\{.*\}).{0,5}?\[END INLINE GRAPHDOC EXPORT\]/s);o&&o[1]&&(e=o[1]);let a={};try{if(a=JSON.parse(e),!a)throw Error()}catch(l){return void n.error("Data does not contain valid JSON, or does not contain the GraphDoc boundary specifier.")}if(!Object.hasOwnProperty.call(a,"main")||!Object.hasOwnProperty.call(a,"nodes")||!Object.hasOwnProperty.call(a,"edges"))return void n.error("Data does not include one of the required properties: 'main', 'nodes' or 'edges'.");const s=(new Be).in_json(a).out_antv();t.graph?.fromJSON(s),t.docassemble_cont_update(),n.success("Imported"),i.close()},c=()=>{if(confirm("Are you sure you want to load the example flowchart?")){const e={nodes:[{id:"9ed5d853-62a0-4395-afb9-d94e8cffd2cd",appearance:{x:270,y:40,width:180,height:36},gd:{type:"start",content:"walk or bus?",variable:"walk_or_bus"}},{id:"b8bdd58d-ab1f-44d0-82b8-5edb21f3d484",appearance:{x:270,y:110,width:180,height:36},gd:{type:"decision",content:"is it raining?",variable:"is_raining"}},{id:"396a3b5e-a0cd-49c4-96c3-c65a8da0c483",appearance:{x:90,y:190,width:180,height:36},gd:{type:"notice",content:"take an umbrella",variable:"notice_take_umbrella"}},{id:"d9a60522-cc80-40bf-b691-5e51b27b0e6c",appearance:{x:90,y:260,width:180,height:36},gd:{type:"end",content:"take the bus",variable:"end_bus"}},{id:"20e3d21e-0799-4de7-8d1e-6cac260279ad",appearance:{x:470,y:260,width:180,height:36},gd:{type:"end",content:"take a walk",variable:"end_walk"}}],edges:[{id:"5106836e-d49c-4d33-9ed4-c6b5048ee11f",node_from_id:"b8bdd58d-ab1f-44d0-82b8-5edb21f3d484",node_to_id:"396a3b5e-a0cd-49c4-96c3-c65a8da0c483",gd:{content:"Yes"}},{id:"b81563a8-ad65-4d7e-86df-efbb0cf7fad4",node_from_id:"b8bdd58d-ab1f-44d0-82b8-5edb21f3d484",node_to_id:"20e3d21e-0799-4de7-8d1e-6cac260279ad",gd:{content:"No"}},{id:"3008df09-bacb-4a33-9b3e-8e248e858c2b",node_from_id:"396a3b5e-a0cd-49c4-96c3-c65a8da0c483",node_to_id:"d9a60522-cc80-40bf-b691-5e51b27b0e6c",gd:{content:null}},{id:"90c865d8-fbc3-4b7b-b0a3-46a8f1468c3e",node_from_id:"9ed5d853-62a0-4395-afb9-d94e8cffd2cd",node_to_id:"b8bdd58d-ab1f-44d0-82b8-5edb21f3d484",gd:{content:null}}],main:{name:"Untitled graph"}},n=(new Be).in_json(e).out_antv();t.graph?.fromJSON(n),t.docassemble_cont_update()}},u=()=>{t.graph?.undo()},g=()=>{t.graph?.redo()},h=()=>{confirm("Are you sure you want to reset your workspace?")&&t.graph?.removeCells(t.graph.getCells())};return(t,n)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,l.SU)(i).is_open?((0,a.wg)(),(0,a.j4)(T,{key:0,modal:(0,l.SU)(i),container_style:{"max-width":"30rem"}},{default:(0,a.w5)((()=>[(0,a._)("div",Fe,[(0,a._)("div",Ge,[Je,(0,a._)("div",We,[Ke,Xe,(0,a.wy)((0,a._)("textarea",{placeholder:"Paste the contents of the interview here",ref_key:"el_modal_import_text",ref:s,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,l.SU)(i).data.text=e),class:"mt-2 w-full px-4 py-3 text-xs bg-gray-50 break-all font-mono resize-none h-20 leading-5 border border-gray-200 hover:shadow rounded-md"},"\n                ",512),[[o.nr,(0,l.SU)(i).data.text]]),(0,a._)("span",Qe,[et,(0,a._)("label",tt,[nt,(0,a._)("input",{type:"file",class:"hidden",onChange:r},null,32)]),ot])])])]),(0,a._)("div",at,[(0,a._)("button",{onClick:n[1]||(n[1]=e=>d()),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Import"),(0,a._)("button",{onClick:n[2]||(n[2]=e=>(0,l.SU)(i).close()),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel")])])),_:1},8,["modal"])):(0,a.kq)("",!0),(0,a._)("div",st,[(0,a._)("div",lt,[(0,a._)("button",{disabled:"undefined"===typeof e.graph,onClick:n[3]||(n[3]=e=>u())},"Undo",8,it)]),(0,a._)("div",rt,[(0,a._)("button",{disabled:"undefined"===typeof e.graph,onClick:n[4]||(n[4]=e=>g())},"Redo",8,dt)]),(0,a._)("div",ct,[(0,a._)("button",{disabled:"undefined"===typeof e.graph,onClick:n[5]||(n[5]=e=>h())},"Clear",8,ut)]),(0,a._)("div",gt,[(0,a._)("button",{class:"bg-blue-200",disabled:"undefined"===typeof e.graph,onClick:n[6]||(n[6]=e=>(0,l.SU)(i).open())},"Import",8,ht)]),(0,a._)("div",pt,[(0,a._)("button",{class:"bg-blue-200",disabled:"undefined"===typeof e.graph,onClick:n[7]||(n[7]=e=>c())},"Load default example",8,bt)])])],64))}});const _t=mt;var ft=_t;const vt={class:"block font-semibold mb-1 text-red-900"},yt={class:"list-disc list-inside"},wt={key:1,class:"block text-sky-800"};var xt=(0,a.aZ)({props:{formatted_validation_errors:null},setup(e){const t=e;return(e,n)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)(["overflow-hidden rounded-lg border hover:shadow-sm transition ease-in-out mt-4 mb-2 py-2 px-4",{"bg-red-50 border-red-900/20 hover:border-red-900/30":t.formatted_validation_errors.length>0,"bg-sky-100/10 border-sky-900/20 hover:border-sky-900/30":!(t.formatted_validation_errors.length>0)}])},[t.formatted_validation_errors.length>0?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",vt,"There are "+(0,s.zw)(t.formatted_validation_errors.length)+" errors in your graph",1),(0,a._)("ul",yt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.formatted_validation_errors,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{class:"validation-error text-red-800",key:t},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e},[e.__v_isVNode?((0,a.wg)(),(0,a.j4)((0,a.LL)(e),{key:0})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,s.zw)(e),1)],64))],64)))),128))])))),128))])],64)):((0,a.wg)(),(0,a.iD)("span",wt,"Graph contains no errors"))],2))}});const kt=xt;var Ct=kt;function Dt(e,t,n="text/plain"){const o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.href=window.URL.createObjectURL(new Blob([t],{type:n})),o.setAttribute("download",e),o.click(),window.URL.revokeObjectURL(o.href),document.body.removeChild(o)}const jt={class:"mb-4"},St=(0,a._)("h1",{class:"text-4xl font-serif inline"},"GraphDoc",-1),Ot=(0,a._)("a",{class:"inline-flex self-center ml-3",title:"GitHub",href:"https://github.com/maastrichtlawtech/graphdoc",target:"_blank"},[(0,a._)("svg",{class:"svg-github",fill:"#1B1F23",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z",transform:"scale(64)"})])],-1),$t={key:0,class:"text-sm text-slate-900"},Ut=(0,a.uE)('<p class="mt-2"> This tool serves as a PoC to convert flowcharts (which can be represented as directed acyclic graphs) to Docassemble interviews. The goal of this tool is to provide an intuitive interface for constructing Docassemble interviews, in which relations and dependencies between nodes (&#39;blocks&#39;) are more clearly visible. </p><h2 class="text-lg font-serif mt-2 mb-1">Instructions</h2><p class="mb-1"> Start by dragging nodes from the left sidebar. Connect nodes by dragging edges from and to the ports of the nodes. Configure nodes and edges by clicking on their cells and filling in the details in the config sidebar on the right. Nodes and edges can also be removed from this sidebar. If no output is produced, interpret the validation errors presented above the Docassemble output window. </p><p class="mb-1"> For an example of a well-structured graph in GraphDoc, click on &#39;Load example&#39;. </p><h2 class="text-lg font-serif mt-2 mb-1">Backup and publish</h2><p> When your graph is complete, you can copy or download the contents of the Docassemble interview configuration file. These contents can be tested in the Docassemble Playground, by pasting the contents in the <a class="styled" href="https://docassemble.org/docs/playground.html#interview_files" target="_blank">YAML editor</a>. By default, the bottom of the generated interview contains a backup of the constructed graph in JSON. You can import the graph by clicking on &#39;Import&#39; in the toolbar and pasting or uploading the generated interview, or just appended JSON portion of the interview. </p>',6),Ht=[Ut],Et={class:"overflow-hidden rounded-lg border border-slate-900/20 hover:shadow-sm hover:border-slate-900/30 transition ease-in-out"},At={class:"w-full bg-gray-100"},Tt={class:"w-full flex",style:{height:"500px"}},It={class:"w-20 flex-initial bg-gray-100 border-t border-gray-200"},Mt=(0,a._)("div",{id:"modeler-container-box",class:"flex flex-grow border-b-0 border-gray-300/90",style:{"border-width":"3px"}},[(0,a._)("div",{id:"modeler-container",style:{flex:"1"}})],-1),Pt={class:"w-64 flex-initial bg-gray-100 border-t border-gray-200 overflow-y-auto"},Nt={class:"my-4"},Lt=(0,a._)("span",{class:"text-lg block mb-1"},"Docassemble interview output",-1),qt={class:"text-sm text-gray-700"},Yt=(0,a.Uk)(" Include a copy of the model "),Zt={class:"relative"},zt={class:"w-full min-h-4 font-mono border rounded p-2 mt-1 whitespace-pre-wrap",id:"docassemble_out_container"},Rt={class:"actions"},Bt=["disabled"],Vt=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Ft=[Vt],Gt=["disabled"];var Jt=(0,a.aZ)({setup(e){const t=(0,l.iH)(!1);(0,a.bv)((()=>{w(),p()}));(0,l.iH)({});const n=(0,l.iH)(),r=(0,l.iH)();function d(e){"undefined"!==typeof e&&(r.value=e,n.value?.select(e),n.value?.scrollToCell(e))}const c=(0,l.iH)([]),u=(0,l.iH)([]),g=(0,l.iH)(""),h=(0,l.qj)({include_json_export:!0});(0,a.YP)((()=>h),(e=>{p()}),{deep:!0});const p=()=>{if("undefined"==typeof n.value)return;const e=(new Be).in_antv(n.value);c.value=(new Ye).validate_graph(e.graph),n.value.getCells().forEach((e=>"undefined"!==typeof e.getData()?.errors&&e.setData({errors:!1},{no_da_update:!0}))),u.value=c.value.map((e=>e.map((e=>{if("string"===typeof e)return e;if(e.is_node()){const t=e,o=n.value?.getCellById(t.id);return"undefined"!==typeof o?(o.setData({errors:!0},{no_da_update:!0}),(0,a.h)("span",{onClick(){d(o)},class:"clickable-entity"},t.get_variable())):`"${t.get_variable()}""`}if(e.is_edge()){const t=e,o=n.value?.getCellById(t.id),s=t.gd.content?`with content ${t.gd.content}`:`leaving from node ${t.get_node_from().get_label()}`;return"undefined"!==typeof o?(0,a.h)("span",{onClick(){d(n.value?.getCellById(t.gd.content?t.id:t.node_from_id))},class:"clickable-entity"},s):`"${s}"`}return""})))),0==u.value.length?(g.value=e.out_docassemble(),g.value&&h.include_json_export&&(g.value=g.value.concat("\n---\n# [START INLINE GRAPHDOC EXPORT]").concat("\n# ").concat(JSON.stringify(e.out_json())).concat("\n# [END INLINE GRAPHDOC EXPORT]"))):g.value="-"},b=(0,l.iH)("COPY"),m=()=>{const e=document.getElementById("docassemble_out_container");e&&(window.getSelection()?.selectAllChildren(e),navigator.clipboard.writeText(g.value).then((()=>{b.value="COPIED!",setTimeout((()=>{b.value="COPY"}),1200)})).catch((e=>{b.value="FAILED",setTimeout((()=>{b.value="COPY"}),1200),console.log("Failed to copy",e)})))},_=()=>{Dt("interview.yml",g.value)},f=e=>{e.on("cell:change:*",(e=>{e.options.no_da_update||("target"==e.key?typeof e.current.cell!=typeof e.previous.cell&&p():["target","zIndex","tools","position"].includes(e.key)||p())})),e.on("node:moved",p),e.on("cell:removed",p),e.on("cell:added",p),e.on("cell:selected",(({cell:e,options:t})=>{r.value!=e&&(r.value=e)})),e.on("cell:unselected",(({cell:e,options:t})=>{null!=r.value&&(r.value=void 0)})),e.on("blank:click",(({e:e,x:t,y:n})=>{null!=r.value&&(r.value=void 0)}))},w=()=>{const e=document.getElementById("modeler-container");n.value=new i.kJ({...v,container:e,autoResize:!0}),void 0!=n.value&&(y(n.value),f(n.value),p())};return(e,i)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",jt,[(0,a._)("span",null,[St,Ot,(0,a._)("button",{onClick:i[0]||(i[0]=e=>t.value=!t.value),class:"font-normal underline-offset-4 underline hover:no-underline ml-4 py-1 px-2 text-gray-600 hover:text-gray-900"},"read "+(0,s.zw)(t.value?"less":"more"),1)]),t.value?((0,a.wg)(),(0,a.iD)("div",$t,Ht)):(0,a.kq)("",!0)]),(0,a._)("div",Et,[(0,a._)("div",At,[(0,a.Wm)(ft,{graph:n.value,docassemble_cont_update:p,init_modeler:w},null,8,["graph"])]),(0,a._)("div",Tt,[(0,a._)("div",It,[null!==n.value?((0,a.wg)(),(0,a.j4)(Le,{key:0,graph:n.value},null,8,["graph"])):(0,a.kq)("",!0)]),Mt,(0,a._)("div",Pt,[(0,a.Wm)(Te,{cell:r.value},null,8,["cell"])])])]),(0,a.Wm)(Ct,{formatted_validation_errors:u.value},null,8,["formatted_validation_errors"]),(0,a._)("div",Nt,[Lt,(0,a._)("label",qt,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"mr-1","onUpdate:modelValue":i[1]||(i[1]=e=>(0,l.SU)(h).include_json_export=e)},null,512),[[o.e8,(0,l.SU)(h).include_json_export]]),Yt]),(0,a._)("div",Zt,[(0,a._)("div",zt,(0,s.zw)(g.value),1),(0,a._)("div",Rt,[(0,a._)("button",{onClick:i[2]||(i[2]=e=>_()),title:"Download YAML file",disabled:u.value.length>0},Ft,8,Bt),(0,a._)("button",{onClick:i[3]||(i[3]=e=>m()),title:"Copy YMAL content",disabled:u.value.length>0},(0,s.zw)(b.value),9,Gt)])])])],64))}});const Wt=Jt;var Kt=Wt;const Xt={class:"mb-8 mt-4 mx-auto max-w-6xl"};var Qt=(0,a.aZ)({setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("div",Xt,[(0,a.Wm)(Kt)]))}});const en=Qt;var tn=en;n(343);(0,o.ri)(tn).use(Ve.ZP,{closeOnClick:!1,draggable:!1}).mount("#app")},2562:function(){}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,s){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],s=e[c][2];for(var i=!0,r=0;r<o.length;r++)(!1&s||l>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(i=!1,s<l&&(l=s));if(i){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[o,a,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,s,l=o[0],i=o[1],r=o[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(r)var c=r(n)}for(t&&t(o);d<l.length;d++)s=l[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},o=self["webpackChunkGraphDoc"]=self["webpackChunkGraphDoc"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3727)}));o=n.O(o)})();
//# sourceMappingURL=app.b610949c.js.map